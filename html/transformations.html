

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Transformations &mdash; rethink-java-driver 0.1 documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  
    <link rel="top" title="rethink-java-driver 0.1 documentation" href="index.html"/>
        <link rel="next" title="Aggregation" href="aggregation.html"/>
        <link rel="prev" title="Joins" href="joins.html"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        <a href="index.html" class="fa fa-home"> rethink-java-driver</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
        
            <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="notes.html">Notes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="notes.html#java-8-or-previous">Java 8 or Previous</a></li>
<li class="toctree-l2"><a class="reference internal" href="notes.html#milestones">Milestones</a></li>
<li class="toctree-l2"><a class="reference internal" href="notes.html#contribute">Contribute</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="accessing_reql.html">Accessing REQL</a><ul>
<li class="toctree-l2"><a class="reference internal" href="accessing_reql.html#r">r</a></li>
<li class="toctree-l2"><a class="reference internal" href="accessing_reql.html#connect">connect</a></li>
<li class="toctree-l2"><a class="reference internal" href="accessing_reql.html#close">close</a></li>
<li class="toctree-l2"><a class="reference internal" href="accessing_reql.html#reconnect">reconnect</a></li>
<li class="toctree-l2"><a class="reference internal" href="accessing_reql.html#use">use</a></li>
<li class="toctree-l2"><a class="reference internal" href="accessing_reql.html#run">run</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="manipulating_databases.html">Manipulating Databases</a><ul>
<li class="toctree-l2"><a class="reference internal" href="manipulating_databases.html#dbcreate">dbCreate</a></li>
<li class="toctree-l2"><a class="reference internal" href="manipulating_databases.html#dbdrop">dbDrop</a></li>
<li class="toctree-l2"><a class="reference internal" href="manipulating_databases.html#dblist">dbList</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="manipulating_tables.html">Manipulating Tables</a><ul>
<li class="toctree-l2"><a class="reference internal" href="manipulating_tables.html#tablecreate">tableCreate</a></li>
<li class="toctree-l2"><a class="reference internal" href="manipulating_tables.html#tabledrop">tableDrop</a></li>
<li class="toctree-l2"><a class="reference internal" href="manipulating_tables.html#tablelist">tableList</a></li>
<li class="toctree-l2"><a class="reference internal" href="manipulating_tables.html#indexcreate">indexCreate</a></li>
<li class="toctree-l2"><a class="reference internal" href="manipulating_tables.html#indexdrop">indexDrop</a></li>
<li class="toctree-l2"><a class="reference internal" href="manipulating_tables.html#indexlist">indexList</a></li>
<li class="toctree-l2"><a class="reference internal" href="manipulating_tables.html#indexstatus">indexStatus</a></li>
<li class="toctree-l2"><a class="reference internal" href="manipulating_tables.html#indexwait">indexWait</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="writing_data.html">Writing Data</a><ul>
<li class="toctree-l2"><a class="reference internal" href="writing_data.html#insert">insert</a></li>
<li class="toctree-l2"><a class="reference internal" href="writing_data.html#update">update</a></li>
<li class="toctree-l2"><a class="reference internal" href="writing_data.html#replace">replace</a></li>
<li class="toctree-l2"><a class="reference internal" href="writing_data.html#delete">delete</a></li>
<li class="toctree-l2"><a class="reference internal" href="writing_data.html#sync">sync</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="selecting_data.html">Selecting Data</a><ul>
<li class="toctree-l2"><a class="reference internal" href="selecting_data.html#db">db</a></li>
<li class="toctree-l2"><a class="reference internal" href="selecting_data.html#table">table</a></li>
<li class="toctree-l2"><a class="reference internal" href="selecting_data.html#get">get</a></li>
<li class="toctree-l2"><a class="reference internal" href="selecting_data.html#getall">getAll</a></li>
<li class="toctree-l2"><a class="reference internal" href="selecting_data.html#filter">filter</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="joins.html">Joins</a><ul>
<li class="toctree-l2"><a class="reference internal" href="joins.html#innerjoin">innerJoin</a></li>
<li class="toctree-l2"><a class="reference internal" href="joins.html#outerjoin">outerJoin</a></li>
<li class="toctree-l2"><a class="reference internal" href="joins.html#eqjoin">eqJoin</a></li>
<li class="toctree-l2"><a class="reference internal" href="joins.html#zip">zip</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="">Transformations</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#map">map</a></li>
<li class="toctree-l2"><a class="reference internal" href="#withfields">withFields</a></li>
<li class="toctree-l2"><a class="reference internal" href="#concatmap">concatMap</a></li>
<li class="toctree-l2"><a class="reference internal" href="#orderby">orderBy</a></li>
<li class="toctree-l2"><a class="reference internal" href="#skip">Skip</a></li>
<li class="toctree-l2"><a class="reference internal" href="#limit">limit</a></li>
<li class="toctree-l2"><a class="reference internal" href="#indexesof">IndexesOf</a></li>
<li class="toctree-l2"><a class="reference internal" href="#isempty">isEmpty</a></li>
<li class="toctree-l2"><a class="reference internal" href="#union">Union</a></li>
<li class="toctree-l2"><a class="reference internal" href="#sample">Sample</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="aggregation.html">Aggregation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="aggregation.html#group">group</a></li>
<li class="toctree-l2"><a class="reference internal" href="aggregation.html#ungroup">ungroup</a></li>
<li class="toctree-l2"><a class="reference internal" href="aggregation.html#reduce">reduce</a></li>
<li class="toctree-l2"><a class="reference internal" href="aggregation.html#count">count</a></li>
<li class="toctree-l2"><a class="reference internal" href="aggregation.html#sum">sum</a></li>
<li class="toctree-l2"><a class="reference internal" href="aggregation.html#avg">avg</a></li>
<li class="toctree-l2"><a class="reference internal" href="aggregation.html#min">min</a></li>
<li class="toctree-l2"><a class="reference internal" href="aggregation.html#max">max</a></li>
<li class="toctree-l2"><a class="reference internal" href="aggregation.html#distinct">distinct</a></li>
<li class="toctree-l2"><a class="reference internal" href="aggregation.html#contains">contains</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="document_manipulation.html">Document Manipulation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="document_manipulation.html#row">row</a></li>
<li class="toctree-l2"><a class="reference internal" href="document_manipulation.html#pluck">pluck</a></li>
<li class="toctree-l2"><a class="reference internal" href="document_manipulation.html#without">without</a></li>
<li class="toctree-l2"><a class="reference internal" href="document_manipulation.html#merge">merge</a></li>
<li class="toctree-l2"><a class="reference internal" href="document_manipulation.html#append">append</a></li>
<li class="toctree-l2"><a class="reference internal" href="document_manipulation.html#prepend">prepend</a></li>
<li class="toctree-l2"><a class="reference internal" href="document_manipulation.html#difference">difference</a></li>
<li class="toctree-l2"><a class="reference internal" href="document_manipulation.html#setinsert">setInsert</a></li>
<li class="toctree-l2"><a class="reference internal" href="document_manipulation.html#setunion">setUnion</a></li>
<li class="toctree-l2"><a class="reference internal" href="document_manipulation.html#setintersection">setIntersection</a></li>
<li class="toctree-l2"><a class="reference internal" href="document_manipulation.html#setdifference">setDifference</a></li>
<li class="toctree-l2"><a class="reference internal" href="document_manipulation.html#field">field</a></li>
<li class="toctree-l2"><a class="reference internal" href="document_manipulation.html#hasfields">hasFields</a></li>
<li class="toctree-l2"><a class="reference internal" href="document_manipulation.html#insertat">insertAt</a></li>
<li class="toctree-l2"><a class="reference internal" href="document_manipulation.html#spliceat">spliceAt</a></li>
<li class="toctree-l2"><a class="reference internal" href="document_manipulation.html#deleteat">deleteAt</a></li>
<li class="toctree-l2"><a class="reference internal" href="document_manipulation.html#change">change</a></li>
<li class="toctree-l2"><a class="reference internal" href="document_manipulation.html#keys">keys</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="string_manipulation.html">String Manipulation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="string_manipulation.html#match">match</a></li>
<li class="toctree-l2"><a class="reference internal" href="string_manipulation.html#split">split</a></li>
<li class="toctree-l2"><a class="reference internal" href="string_manipulation.html#upcase">upcase</a></li>
<li class="toctree-l2"><a class="reference internal" href="string_manipulation.html#downcase">downcase</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="math_logic.html">Math And Logic</a><ul>
<li class="toctree-l2"><a class="reference internal" href="math_logic.html#add">add</a></li>
<li class="toctree-l2"><a class="reference internal" href="math_logic.html#sub">sub</a></li>
<li class="toctree-l2"><a class="reference internal" href="math_logic.html#mul">mul</a></li>
<li class="toctree-l2"><a class="reference internal" href="math_logic.html#div">div</a></li>
<li class="toctree-l2"><a class="reference internal" href="math_logic.html#mod">mod</a></li>
<li class="toctree-l2"><a class="reference internal" href="math_logic.html#and">and</a></li>
<li class="toctree-l2"><a class="reference internal" href="math_logic.html#or">or</a></li>
<li class="toctree-l2"><a class="reference internal" href="math_logic.html#eq">eq</a></li>
<li class="toctree-l2"><a class="reference internal" href="math_logic.html#ne">ne</a></li>
<li class="toctree-l2"><a class="reference internal" href="math_logic.html#gt">gt</a></li>
<li class="toctree-l2"><a class="reference internal" href="math_logic.html#ge">ge</a></li>
<li class="toctree-l2"><a class="reference internal" href="math_logic.html#lt">lt</a></li>
<li class="toctree-l2"><a class="reference internal" href="math_logic.html#le">le</a></li>
<li class="toctree-l2"><a class="reference internal" href="math_logic.html#not">not</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="dates_times.html">Dates and Times</a><ul>
<li class="toctree-l2"><a class="reference internal" href="dates_times.html#now">now</a></li>
<li class="toctree-l2"><a class="reference internal" href="dates_times.html#time">time</a></li>
<li class="toctree-l2"><a class="reference internal" href="dates_times.html#epochtime">epochTime</a></li>
<li class="toctree-l2"><a class="reference internal" href="dates_times.html#intimezone">inTimezone</a></li>
<li class="toctree-l2"><a class="reference internal" href="dates_times.html#timezone">timezone</a></li>
<li class="toctree-l2"><a class="reference internal" href="dates_times.html#during">during</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="control_structures.html">Control Structures</a></li>
</ul>

        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">rethink-java-driver</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>Transformations</li>
      <li class="wy-breadcrumbs-aside">
        
          <a href="_sources/transformations.txt" rel="nofollow"> View page source</a>
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            
  <div class="section" id="transformations">
<h1>Transformations<a class="headerlink" href="#transformations" title="Permalink to this headline">¶</a></h1>
<div class="section" id="map">
<h2>map<a class="headerlink" href="#map" title="Permalink to this headline">¶</a></h2>
<p>Transform each element of the sequence by applying the given mapping function.</p>
<p>Example: Construct a sequence of hero power ratings.</p>
<div class="highlight-java"><div class="highlight"><pre><span class="n">List</span><span class="o">&lt;</span><span class="n">Double</span><span class="o">&gt;</span> <span class="n">res</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="na">table</span><span class="o">(</span><span class="s">&quot;marvel&quot;</span><span class="o">).</span><span class="na">map</span><span class="o">(</span><span class="n">hero</span> <span class="o">-&gt;</span>
        <span class="n">hero</span><span class="o">.</span><span class="na">field</span><span class="o">(</span><span class="s">&quot;combatPower&quot;</span><span class="o">).</span><span class="na">add</span><span class="o">(</span><span class="n">hero</span><span class="o">.</span><span class="na">field</span><span class="o">(</span><span class="s">&quot;compassionPower&quot;</span><span class="o">).</span><span class="na">mul</span><span class="o">(</span><span class="mi">2</span><span class="o">));</span>
<span class="o">).</span><span class="na">runTyped</span><span class="o">(</span><span class="n">conn</span><span class="o">);</span>
</pre></div>
</div>
</div>
<div class="section" id="withfields">
<h2>withFields<a class="headerlink" href="#withfields" title="Permalink to this headline">¶</a></h2>
<p>Takes a sequence of objects and a list of fields. If any objects in the sequence don&#8221;t have all of the specified fields, they&#8221;re dropped from the sequence. The remaining objects have the specified fields plucked out. (This is identical to has_fields followed by pluck on a sequence.)</p>
<p>Example: Get a list of heroes and their nemeses, excluding any heroes that lack one.</p>
<div class="highlight-java"><div class="highlight"><pre><span class="n">r</span><span class="o">.</span><span class="na">table</span><span class="o">(</span><span class="s">&quot;marvel&quot;</span><span class="o">).</span><span class="na">withFields</span><span class="o">(</span><span class="s">&quot;id&quot;</span><span class="o">,</span> <span class="s">&quot;nemesis&quot;</span><span class="o">).</span><span class="na">run</span><span class="o">(</span><span class="n">c</span><span class="o">);</span>
</pre></div>
</div>
</div>
<div class="section" id="concatmap">
<h2>concatMap<a class="headerlink" href="#concatmap" title="Permalink to this headline">¶</a></h2>
<p>Flattens a sequence of arrays returned by the mappingFunction into a single sequence.</p>
<p>Example: Construct a sequence of all monsters defeated by Marvel heroes. Here the field &#8220;defeatedMonsters&#8221; is a list that is concatenated to the sequence.</p>
<div class="highlight-java"><div class="highlight"><pre><span class="n">r</span><span class="o">.</span><span class="na">table</span><span class="o">(</span><span class="s">&quot;marvel&quot;</span><span class="o">).</span><span class="na">concatMap</span><span class="o">(</span><span class="n">h</span><span class="o">-&gt;</span><span class="n">h</span><span class="o">.</span><span class="na">field</span><span class="o">(</span><span class="s">&quot;defeatedMonsters&quot;</span><span class="o">)).</span><span class="na">run</span><span class="o">(</span><span class="n">c</span><span class="o">);</span>
</pre></div>
</div>
</div>
<div class="section" id="orderby">
<h2>orderBy<a class="headerlink" href="#orderby" title="Permalink to this headline">¶</a></h2>
<p>Sort the sequence by document values of the given key(s). To specify the ordering, wrap the attribute with either r.asc or r.desc (defaults to ascending).</p>
<p>Sorting without an index requires the server to hold the sequence in memory, and is limited to 100,000 documents. Sorting with an index can be done on arbitrarily large tables, or after a between command using the same index.</p>
<p>Example: Order all the posts using the index date.</p>
<div class="highlight-java"><div class="highlight"><pre><span class="n">r</span><span class="o">.</span><span class="na">table</span><span class="o">(</span><span class="s">&quot;posts&quot;</span><span class="o">).</span><span class="na">orderByIndex</span><span class="o">(</span><span class="s">&quot;date&quot;</span><span class="o">).</span><span class="na">run</span><span class="o">(</span><span class="n">conn</span><span class="o">);</span>
</pre></div>
</div>
<p>The index must have been previously created with indexCreate.</p>
<div class="highlight-java"><div class="highlight"><pre><span class="n">r</span><span class="o">.</span><span class="na">table</span><span class="o">(</span><span class="s">&quot;posts&quot;</span><span class="o">).</span><span class="na">indexCreate</span><span class="o">(</span><span class="s">&quot;date&quot;</span><span class="o">).</span><span class="na">run</span><span class="o">(</span><span class="n">conn</span><span class="o">);</span>
</pre></div>
</div>
<p>You can also select a descending ordering</p>
<div class="highlight-java"><div class="highlight"><pre><span class="n">r</span><span class="o">.</span><span class="na">table</span><span class="o">(</span><span class="s">&quot;posts&quot;</span><span class="o">).</span><span class="na">orderBy</span><span class="o">(</span><span class="n">r</span><span class="o">.</span><span class="na">desc</span><span class="o">(</span><span class="s">&quot;date&quot;</span><span class="o">)).</span><span class="na">run</span><span class="o">(</span><span class="n">conn</span><span class="o">);</span>
</pre></div>
</div>
<p>Example: If you have a sequence with less than 100,000 documents, you can order it without an index.</p>
<div class="highlight-java"><div class="highlight"><pre><span class="n">r</span><span class="o">.</span><span class="na">table</span><span class="o">(</span><span class="s">&quot;posts&quot;</span><span class="o">).</span><span class="na">get</span><span class="o">(</span><span class="mi">1</span><span class="o">).</span><span class="na">field</span><span class="o">(</span><span class="s">&quot;comments&quot;</span><span class="o">).</span><span class="na">orderByField</span><span class="o">(</span><span class="s">&quot;date&quot;</span><span class="o">);</span>
</pre></div>
</div>
<p>Example: If you have a sequence with less than 100,000 documents, you can order it with an arbitrary function directly.</p>
<div class="highlight-java"><div class="highlight"><pre><span class="n">r</span><span class="o">.</span><span class="na">table</span><span class="o">(</span><span class="s">&quot;small_table&quot;</span><span class="o">).</span><span class="na">orderBy</span><span class="o">(</span><span class="n">doc</span> <span class="o">-&gt;</span>
        <span class="n">doc</span><span class="o">.</span><span class="na">field</span><span class="o">(</span><span class="s">&quot;upvotes&quot;</span><span class="o">).</span><span class="na">minus</span><span class="o">(</span><span class="n">doc</span><span class="o">.</span><span class="na">field</span><span class="o">(</span><span class="s">&quot;downvotes&quot;</span><span class="o">));</span>
<span class="o">);</span>
</pre></div>
</div>
<p>Signatures:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="kd">public</span> <span class="n">OrderBy</span> <span class="nf">orderBy</span><span class="o">(</span><span class="n">RqlFunction</span> <span class="n">function</span><span class="o">);</span>
<span class="kd">public</span> <span class="n">OrderBy</span> <span class="nf">orderBy</span><span class="o">(</span><span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">fields</span><span class="o">,</span> <span class="n">String</span> <span class="n">index</span><span class="o">);</span>
<span class="kd">public</span> <span class="n">OrderBy</span> <span class="nf">orderBy</span><span class="o">(</span><span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">fields</span><span class="o">);</span>
<span class="kd">public</span> <span class="n">OrderBy</span> <span class="nf">orderByIndex</span><span class="o">(</span><span class="n">String</span> <span class="n">index</span><span class="o">);</span>
<span class="kd">public</span> <span class="n">OrderBy</span> <span class="nf">orderByField</span><span class="o">(</span><span class="n">String</span> <span class="n">field</span><span class="o">);</span>
</pre></div>
</div>
</div>
<div class="section" id="skip">
<h2>Skip<a class="headerlink" href="#skip" title="Permalink to this headline">¶</a></h2>
<p>Skip a number of elements from the head of the sequence.</p>
<p>Example: Here in conjunction with order_by we choose to ignore the most successful heroes.</p>
<div class="highlight-java"><div class="highlight"><pre><span class="n">r</span><span class="o">.</span><span class="na">table</span><span class="o">(</span><span class="s">&quot;marvel&quot;</span><span class="o">).</span><span class="na">orderBy</span><span class="o">(</span><span class="s">&quot;successMetric&quot;</span><span class="o">).</span><span class="na">skip</span><span class="o">(</span><span class="mi">10</span><span class="o">).</span><span class="na">run</span><span class="o">(</span><span class="n">conn</span><span class="o">);</span>
</pre></div>
</div>
</div>
<div class="section" id="limit">
<h2>limit<a class="headerlink" href="#limit" title="Permalink to this headline">¶</a></h2>
<p>End the sequence after the given number of elements.</p>
<p>Example: Only so many can fit in our Pantheon of heroes.</p>
<div class="highlight-java"><div class="highlight"><pre><span class="n">r</span><span class="o">.</span><span class="na">table</span><span class="o">(</span><span class="s">&quot;marvel&quot;</span><span class="o">).</span><span class="na">orderBy</span><span class="o">(</span><span class="s">&quot;belovedness&quot;</span><span class="o">).</span><span class="na">limit</span><span class="o">(</span><span class="mi">10</span><span class="o">).</span><span class="na">run</span><span class="o">(</span><span class="n">conn</span><span class="o">);</span>
</pre></div>
</div>
</div>
<div class="section" id="indexesof">
<h2>IndexesOf<a class="headerlink" href="#indexesof" title="Permalink to this headline">¶</a></h2>
<p>Get the indexes of an element in a sequence. If the argument is a predicate, get the indexes of all elements matching it.</p>
<p>Example: Find the position of the letter &#8220;c&#8221;.</p>
<div class="highlight-java"><div class="highlight"><pre><span class="n">r</span><span class="o">.</span><span class="na">expr</span><span class="o">([</span><span class="s">&quot;a&quot;</span><span class="o">,</span><span class="s">&quot;b&quot;</span><span class="o">,</span><span class="s">&quot;c&quot;</span><span class="o">]).</span><span class="na">indexesOf</span><span class="o">(</span><span class="s">&quot;c&quot;</span><span class="o">).</span><span class="na">run</span><span class="o">(</span><span class="n">conn</span><span class="o">);</span>
</pre></div>
</div>
<p>Example: Find the popularity ranking of invisible heroes.</p>
<div class="highlight-java"><div class="highlight"><pre><span class="n">r</span><span class="o">.</span><span class="na">table</span><span class="o">(</span><span class="s">&quot;marvel&quot;</span><span class="o">).</span><span class="na">union</span><span class="o">(</span><span class="n">r</span><span class="o">.</span><span class="na">table</span><span class="o">(</span><span class="s">&quot;dc&quot;</span><span class="o">)).</span><span class="na">orderBy</span><span class="o">(</span><span class="s">&quot;popularity&quot;</span><span class="o">).</span><span class="na">indexesOf</span><span class="o">(</span>
        <span class="n">r</span><span class="o">.</span><span class="na">row</span><span class="o">.</span><span class="na">field</span><span class="o">(</span><span class="s">&quot;superpowers&quot;</span><span class="o">).</span><span class="na">contains</span><span class="o">(</span><span class="s">&quot;invisibility&quot;</span><span class="o">)</span>
<span class="o">).</span><span class="na">run</span><span class="o">(</span><span class="n">conn</span><span class="o">);</span>
</pre></div>
</div>
</div>
<div class="section" id="isempty">
<h2>isEmpty<a class="headerlink" href="#isempty" title="Permalink to this headline">¶</a></h2>
<p>Test if a sequence is empty.</p>
<p>Example: Are there any documents in the marvel table?</p>
<div class="highlight-java"><div class="highlight"><pre><span class="n">Boolean</span> <span class="n">answer</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="na">table</span><span class="o">(</span><span class="s">&quot;marvel&quot;</span><span class="o">).</span><span class="na">isEmpty</span><span class="o">().</span><span class="na">run</span><span class="o">(</span><span class="n">conn</span><span class="o">)</span>
</pre></div>
</div>
</div>
<div class="section" id="union">
<h2>Union<a class="headerlink" href="#union" title="Permalink to this headline">¶</a></h2>
<p>Concatenate two sequences.</p>
<p>Example: Construct a stream of all heroes.</p>
<div class="highlight-java"><div class="highlight"><pre><span class="n">r</span><span class="o">.</span><span class="na">table</span><span class="o">(</span><span class="s">&quot;marvel&quot;</span><span class="o">).</span><span class="na">union</span><span class="o">(</span><span class="n">r</span><span class="o">.</span><span class="na">table</span><span class="o">(</span><span class="s">&quot;dc&quot;</span><span class="o">)).</span><span class="na">run</span><span class="o">(</span><span class="n">conn</span><span class="o">);</span>
</pre></div>
</div>
</div>
<div class="section" id="sample">
<h2>Sample<a class="headerlink" href="#sample" title="Permalink to this headline">¶</a></h2>
<p>Select a given number of elements from a sequence with uniform random distribution. Selection is done without replacement.</p>
<p>Example: Select 3 random heroes.</p>
<div class="highlight-java"><div class="highlight"><pre><span class="n">r</span><span class="o">.</span><span class="na">table</span><span class="o">(</span><span class="s">&quot;marvel&quot;</span><span class="o">).</span><span class="na">sample</span><span class="o">(</span><span class="mi">3</span><span class="o">).</span><span class="na">run</span><span class="o">(</span><span class="n">conn</span><span class="o">);</span>
</pre></div>
</div>
</div>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="aggregation.html" class="btn btn-neutral float-right" title="Aggregation"/>Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="joins.html" class="btn btn-neutral" title="Joins"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2014, Nick Verlinde.
    </p>
  </div>

  <a href="https://github.com/snide/sphinx_rtd_theme">Sphinx theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>